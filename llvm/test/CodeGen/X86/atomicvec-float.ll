; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc < %s --mtriple=x86_64 | FileCheck %s

define float @load_atomic_float(ptr %src) {
; CHECK-LABEL: load_atomic_float:
; CHECK:       # %bb.0:
; CHECK-NEXT:    movss {{.*#+}} xmm0 = mem[0],zero,zero,zero
; CHECK-NEXT:    retq
  %ret = load atomic float, ptr %src acquire, align 4
  ret float %ret
}

define <1 x float> @load_atomic_vector_float1(ptr %src) {
; CHECK-LABEL: load_atomic_vector_float1:
; CHECK:       # %bb.0:
; CHECK-NEXT:    movss {{.*#+}} xmm0 = mem[0],zero,zero,zero
; CHECK-NEXT:    retq
  %ret = load atomic <1 x float>, ptr %src acquire, align 4
  ret <1 x float> %ret
}

define <2 x float> @load_atomic_vector_float2(ptr %src) {
; CHECK-LABEL: load_atomic_vector_float2:
; CHECK:       # %bb.0:
; CHECK-NEXT:    pushq %rax
; CHECK-NEXT:    .cfi_def_cfa_offset 16
; CHECK-NEXT:    movq %rdi, %rsi
; CHECK-NEXT:    movq %rsp, %rdx
; CHECK-NEXT:    movl $8, %edi
; CHECK-NEXT:    movl $2, %ecx
; CHECK-NEXT:    callq __atomic_load@PLT
; CHECK-NEXT:    movsd {{.*#+}} xmm0 = mem[0],zero
; CHECK-NEXT:    popq %rax
; CHECK-NEXT:    .cfi_def_cfa_offset 8
; CHECK-NEXT:    retq
  %ret = load atomic <2 x float>, ptr %src acquire, align 4
  ret <2 x float> %ret
}
